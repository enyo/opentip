// Opentip v2.4.6
// Copyright (c) 2009-2012
// www.opentip.org
// MIT Licensed
var __slice=[].slice,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},__hasProp={}.hasOwnProperty;!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Opentip=b()}(this,function(){var a,b,c,d,e,f,g,h,i,j,k;for(a=function(){function a(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(this.id=++a.lastId,this.debug("Creating Opentip."),a.tips.push(this),this.adapter=a.adapter,f=this.adapter.data(b,"opentips")||[],f.push(this),this.adapter.data(b,"opentips",f),this.triggerElement=this.adapter.wrap(b),this.triggerElement.length>1)throw new Error("You can't call Opentip on multiple elements.");if(this.triggerElement.length<1)throw new Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},e=this.adapter.clone(e),"object"==typeof c?(e=c,c=d=void 0):"object"==typeof d&&(e=d,d=void 0),null!=d&&(e.title=d),null!=c&&this.setContent(c),null==e["extends"]&&(e["extends"]=null!=e.style?e.style:a.defaultStyle),i=[e],s=e;s["extends"];){if(k=s["extends"],s=a.styles[k],null==s)throw new Error("Invalid style: "+k);i.unshift(s),null==s["extends"]&&"standard"!==k&&(s["extends"]="standard")}for(e=(p=this.adapter).extend.apply(p,[{}].concat(__slice.call(i))),e.hideTriggers=function(){var a,b,c,d;for(c=e.hideTriggers,d=[],a=0,b=c.length;b>a;a++)g=c[a],d.push(g);return d}(),e.hideTrigger&&0===e.hideTriggers.length&&e.hideTriggers.push(e.hideTrigger),q=["tipJoint","targetJoint","stem"],l=0,n=q.length;n>l;l++)j=q[l],e[j]&&"string"==typeof e[j]&&(e[j]=new a.Joint(e[j]));for(!e.ajax||e.ajax!==!0&&e.ajax||(e.ajax="A"===this.adapter.tagName(this.triggerElement)?this.adapter.attr(this.triggerElement,"href"):!1),"click"===e.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(a){return a.preventDefault(),a.stopPropagation(),a.stopped=!0}),e.target&&(e.fixed=!0),e.stem===!0&&(e.stem=new a.Joint(e.tipJoint)),e.target===!0?e.target=this.triggerElement:e.target&&(e.target=this.adapter.wrap(e.target)),this.currentStem=e.stem,null==e.delay&&(e.delay="mouseover"===e.showOn?.2:0),null==e.targetJoint&&(e.targetJoint=new a.Joint(e.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],e.showOn&&"creation"!==e.showOn&&this.showTriggers.push({element:this.triggerElement,event:e.showOn}),null!=e.ajaxCache&&(e.cache=e.ajaxCache,delete e.ajaxCache),this.options=e,this.bound={},r=["prepareToShow","prepareToHide","show","hide","reposition"],m=0,o=r.length;o>m;m++)h=r[m],this.bound[h]=function(a){return function(b){return function(){return a[b].apply(a,arguments)}}}(this)(h);this.adapter.domReady(function(a){return function(){return a.activate(),"creation"===a.options.showOn?a.prepareToShow():void 0}}(this))}return a.prototype.STICKS_OUT_TOP=1,a.prototype.STICKS_OUT_BOTTOM=2,a.prototype.STICKS_OUT_LEFT=1,a.prototype.STICKS_OUT_RIGHT=2,a.prototype["class"]={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},a.prototype._setup=function(){var a,b,c,d,e,f,g,h,i,j,k;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],i=this.options.hideTriggers,d=e=0,g=i.length;g>e;d=++e){if(b=i[d],c=null,a=this.options.hideOn instanceof Array?this.options.hideOn[d]:this.options.hideOn,"string"==typeof b)switch(b){case"trigger":a=a||"mouseout",c=this.triggerElement;break;case"tip":a=a||"mouseover",c=this.container;break;case"target":a=a||"mouseover",c=this.options.target;break;case"closeButton":break;default:throw new Error("Unknown hide trigger: "+b+".")}else a=a||"mouseover",c=this.adapter.wrap(b);c&&this.hideTriggers.push({element:c,event:a,original:b})}for(j=this.hideTriggers,k=[],f=0,h=j.length;h>f;f++)b=j[f],k.push(this.showTriggersWhenVisible.push({element:b.element,event:"mouseover"}));return k},a.prototype._buildContainer=function(){return this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this["class"].container+" "+this["class"].hidden+" "+this["class"].stylePrefix+this.options.className+'"></div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this["class"].loading),this.options.fixed&&this.adapter.addClass(this.container,this["class"].fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this["class"].showEffectPrefix+this.options.showEffect),this.options.hideEffect?this.adapter.addClass(this.container,""+this["class"].hideEffectPrefix+this.options.hideEffect):void 0},a.prototype._buildElements=function(){var a,b;return this.tooltipElement=this.adapter.create('<div class="'+this["class"].opentip+'"><div class="'+this["class"].header+'"></div><div class="'+this["class"].content+'"></div></div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),a=this.adapter.find(this.tooltipElement,"."+this["class"].header),this.options.title&&(b=this.adapter.create("<h1></h1>"),this.adapter.update(b,this.options.title,this.options.escapeTitle),this.adapter.append(a,b)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this["class"].loadingIndicator+'"><span>â†»</span></div>')),__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this["class"].close+'"><span>Close</span></a>'),this.adapter.append(a,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},a.prototype.setContent=function(a){return this.content=a,this._newContent=!0,"function"==typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible?this._updateElementContent():void 0},a.prototype._updateElementContent=function(){var a;return(this._newContent||!this.options.cache&&this._contentFunction)&&(a=this.adapter.find(this.container,"."+this["class"].content),null!=a&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(a,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},a.prototype._storeAndLockDimensions=function(){var a;if(this.container)return a=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:""+this.dimensions.width+"px",top:""+this.currentPosition.top+"px",left:""+this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,a)?void 0:(this.redraw=!0,this._draw())},a.prototype.activate=function(){return this._setupObservers("hidden","hiding")},a.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},a.prototype._setupObservers=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(d=1<=arguments.length?__slice.call(arguments,0):[],f=0,j=d.length;j>f;f++)if(c=d[f],b=!1,"-"===c.charAt(0)&&(b=!0,c=c.substr(1)),this.currentObservers[c]!==!b)switch(this.currentObservers[c]=!b,a=function(a){return function(){var c,d,e;return c=1<=arguments.length?__slice.call(arguments,0):[],b?(d=a.adapter).stopObserving.apply(d,c):(e=a.adapter).observe.apply(e,c)}}(this),c){case"showing":for(n=this.hideTriggers,g=0,k=n.length;k>g;g++)e=n[g],a(e.element,e.event,this.bound.prepareToHide);a(null!=document.onresize?document:window,"resize",this.bound.reposition),a(window,"scroll",this.bound.reposition);break;case"visible":for(o=this.showTriggersWhenVisible,h=0,l=o.length;l>h;h++)e=o[h],a(e.element,e.event,this.bound.prepareToShow);break;case"hiding":for(p=this.showTriggers,i=0,m=p.length;m>i;i++)e=p[i],a(e.element,e.event,this.bound.prepareToShow);break;case"hidden":break;default:throw new Error("Unknown state: "+c)}return null},a.prototype.prepareToShow=function(){return this._abortHiding(),this._abortShowing(),this.visible?void 0:(this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&a._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=e),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0))},a.prototype.show=function(){return this._abortHiding(),this.visible?void 0:(this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),null==this.container&&this._setup(),this.options.group&&a._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,null==this.tooltipElement&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:a.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=e),this.reposition(),this.adapter.removeClass(this.container,this["class"].hiding),this.adapter.removeClass(this.container,this["class"].hidden),this.adapter.addClass(this.container,this["class"].goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(a){return function(){var b;if(a.visible&&!a.preparingToHide)return a.adapter.removeClass(a.container,a["class"].goingToShow),a.adapter.addClass(a.container,a["class"].showing),b=0,a.options.showEffect&&a.options.showEffectDuration&&(b=a.options.showEffectDuration),a.setCss3Style(a.container,{transitionDuration:""+b+"s"}),a._visibilityStateTimeoutId=a.setTimeout(function(){return a.adapter.removeClass(a.container,a["class"].showing),a.adapter.addClass(a.container,a["class"].visible)},b),a._activateFirstInput()}}(this)),this._draw()):this.deactivate())},a.prototype._abortShowing=function(){return this.preparingToShow?(this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden")):void 0},a.prototype.prepareToHide=function(){return this._abortShowing(),this._abortHiding(),this.visible?(this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)):void 0},a.prototype.hide=function(){return this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container)?(this.adapter.removeClass(this.container,this["class"].visible),this.adapter.removeClass(this.container,this["class"].showing),this.adapter.addClass(this.container,this["class"].goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(a){return function(){var b;return a.adapter.removeClass(a.container,a["class"].goingToHide),a.adapter.addClass(a.container,a["class"].hiding),b=0,a.options.hideEffect&&a.options.hideEffectDuration&&(b=a.options.hideEffectDuration),a.setCss3Style(a.container,{transitionDuration:""+b+"s"}),a._visibilityStateTimeoutId=a.setTimeout(function(){return a.adapter.removeClass(a.container,a["class"].hiding),a.adapter.addClass(a.container,a["class"].hidden),a.setCss3Style(a.container,{transitionDuration:"0s"}),a.options.removeElementsOnHide?(a.debug("Removing HTML elements."),a.adapter.remove(a.container),delete a.container,delete a.tooltipElement):void 0},b)}}(this))):void 0},a.prototype._abortHiding=function(){return this.preparingToHide?(this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")):void 0},a.prototype.reposition=function(){var a,b,c;return a=this.getPosition(),null==a||(b=this.options.stem,this.options.containInViewport&&(c=this._ensureViewportContainment(a),a=c.position,b=c.stem),this._positionsEqual(a,this.currentPosition))?void 0:(this.options.stem&&!b.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=a,this.currentStem=b,this._draw(),this.adapter.css(this.container,{left:""+a.left+"px",top:""+a.top+"px"}),this.defer(function(a){return function(){var b,c;return b=a.adapter.unwrap(a.container),b.style.visibility="hidden",c=b.offsetHeight,b.style.visibility="visible"}}(this)))},a.prototype.getPosition=function(a,b,c){var d,f,g,h,i,j,k,l,m;if(this.container)return null==a&&(a=this.options.tipJoint),null==b&&(b=this.options.targetJoint),h={},this.options.target?(k=this.adapter.offset(this.options.target),j=this.adapter.dimensions(this.options.target),h=k,b.right?(l=this.adapter.unwrap(this.options.target),null!=l.getBoundingClientRect?h.left=l.getBoundingClientRect().right+(null!=(m=window.pageXOffset)?m:document.body.scrollLeft):h.left+=j.width):b.center&&(h.left+=Math.round(j.width/2)),b.bottom?h.top+=j.height:b.middle&&(h.top+=Math.round(j.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(h.left+=this.options.borderWidth),this.options.tipJoint.right&&(h.left-=this.options.borderWidth),this.options.tipJoint.top?h.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(h.top-=this.options.borderWidth))):h=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:e.y,left:e.x},this.options.autoOffset&&(i=this.options.stem?this.options.stemLength:0,g=i&&this.options.fixed?2:10,d=a.middle&&!this.options.fixed?15:0,f=a.center&&!this.options.fixed?15:0,a.right?h.left-=g+d:a.left&&(h.left+=g+d),a.bottom?h.top-=g+f:a.top&&(h.top+=g+f),i&&(null==c&&(c=this.options.stem),c.right?h.left-=i:c.left&&(h.left+=i),c.bottom?h.top-=i:c.top&&(h.top+=i))),h.left+=this.options.offset[0],h.top+=this.options.offset[1],a.right?h.left-=this.dimensions.width:a.center&&(h.left-=Math.round(this.dimensions.width/2)),a.bottom?h.top-=this.dimensions.height:a.middle&&(h.top-=Math.round(this.dimensions.height/2)),h},a.prototype._ensureViewportContainment=function(b){var c,d,e,f,g,h,i,j,k,l,m,n;if(i=this.options.stem,e={position:b,stem:i},!this.visible||!b)return e;if(j=this._sticksOut(b),!j[0]&&!j[1])return e;if(l=new a.Joint(this.options.tipJoint),this.options.targetJoint&&(k=new a.Joint(this.options.targetJoint)),h=this.adapter.scrollOffset(),m=this.adapter.viewportDimensions(),n=[b.left-h[0],b.top-h[1]],c=!1,m.width>=this.dimensions.width&&j[0])switch(c=!0,j[0]){case this.STICKS_OUT_LEFT:l.setHorizontal("left"),this.options.targetJoint&&k.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:l.setHorizontal("right"),this.options.targetJoint&&k.setHorizontal("left")}if(m.height>=this.dimensions.height&&j[1])switch(c=!0,j[1]){case this.STICKS_OUT_TOP:l.setVertical("top"),this.options.targetJoint&&k.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:l.setVertical("bottom"),this.options.targetJoint&&k.setVertical("top")}return c?(this.options.stem&&(i=l),b=this.getPosition(l,k,i),d=this._sticksOut(b),f=!1,g=!1,d[0]&&d[0]!==j[0]&&(f=!0,l.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&k.setHorizontal(this.options.targetJoint.horizontal)),d[1]&&d[1]!==j[1]&&(g=!0,l.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&k.setVertical(this.options.targetJoint.vertical)),f&&g?e:((f||g)&&(this.options.stem&&(i=l),b=this.getPosition(l,k,i)),{position:b,stem:i})):e},a.prototype._sticksOut=function(a){var b,c,d,e;return c=this.adapter.scrollOffset(),e=this.adapter.viewportDimensions(),b=[a.left-c[0],a.top-c[1]],d=[!1,!1],b[0]<0?d[0]=this.STICKS_OUT_LEFT:b[0]+this.dimensions.width>e.width&&(d[0]=this.STICKS_OUT_RIGHT),b[1]<0?d[1]=this.STICKS_OUT_TOP:b[1]+this.dimensions.height>e.height&&(d[1]=this.STICKS_OUT_BOTTOM),d},a.prototype._draw=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(r=["top","right","bottom","left"],p=0,q=r.length;q>p;p++)m=r[p],this.adapter.removeClass(this.container,"stem-"+m);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal),this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}return g=[0,0],h=[0,0],__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(f=new a.Joint("top right"===(null!=(s=this.currentStem)?s.toString():void 0)?"top left":"top right"),g=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],h=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),d=this.adapter.clone(this.dimensions),e=[0,0],this.options.borderWidth&&(d.width+=2*this.options.borderWidth,d.height+=2*this.options.borderWidth,e[0]-=this.options.borderWidth,e[1]-=this.options.borderWidth),this.options.shadow&&(d.width+=2*this.options.shadowBlur,d.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),d.height+=2*this.options.shadowBlur,d.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),e[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),e[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),c={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?c.left=this.options.stemLength:this.currentStem.right&&(c.right=this.options.stemLength),this.currentStem.top?c.top=this.options.stemLength:this.currentStem.bottom&&(c.bottom=this.options.stemLength)),f&&(f.left?c.left=Math.max(c.left,h[0]):f.right&&(c.right=Math.max(c.right,h[0])),f.top?c.top=Math.max(c.top,h[1]):f.bottom&&(c.bottom=Math.max(c.bottom,h[1]))),d.width+=c.left+c.right,d.height+=c.top+c.bottom,e[0]-=c.left,e[1]-=c.top,this.currentStem&&this.options.borderWidth&&(t=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),o=t.stemLength,n=t.stemBase),b=this.adapter.unwrap(this.backgroundCanvas),b.width=d.width,b.height=d.height,this.adapter.css(this.backgroundCanvas,{width:""+b.width+"px",height:""+b.height+"px",left:""+e[0]+"px",top:""+e[1]+"px"}),i=b.getContext("2d"),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,b.width,b.height),i.beginPath(),i.fillStyle=this._getColor(i,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),i.lineJoin="miter",i.miterLimit=500,l=this.options.borderWidth/2,this.options.borderWidth?(i.strokeStyle=this.options.borderColor,i.lineWidth=this.options.borderWidth):(o=this.options.stemLength,n=this.options.stemBase),null==n&&(n=0),k=function(a){return function(b,c,d){return d&&i.moveTo(Math.max(n,a.options.borderRadius,g[0])+1-l,-l),c?(i.lineTo(b/2-n/2,-l),i.lineTo(b/2,-o-l),i.lineTo(b/2+n/2,-l)):void 0}}(this),j=function(a){return function(b,c,d){var e,f,h,j;return b?(i.lineTo(-n+l,0-l),i.lineTo(o+l,-o-l),i.lineTo(l,n-l)):c?(j=a.options.closeButtonOffset,h=g[0],d%2!==0&&(j=[j[1],j[0]],h=g[1]),e=Math.acos(j[1]/a.options.closeButtonRadius),f=Math.acos(j[0]/a.options.closeButtonRadius),i.lineTo(-h+l,-l),i.arc(l-j[0],-l+j[1],a.options.closeButtonRadius,-(Math.PI/2+e),f,!1)):(i.lineTo(-a.options.borderRadius+l,-l),i.quadraticCurveTo(l,-l,l,a.options.borderRadius-l))}}(this),i.translate(-e[0],-e[1]),i.save(),function(b){return function(){var c,d,e,g,h,l,m,n,o,p,q;for(q=[],d=o=0,p=a.positions.length/2;p>=0?p>o:o>p;d=p>=0?++o:--o)h=2*d,l=0===d||3===d?0:b.dimensions.width,m=2>d?0:b.dimensions.height,n=Math.PI/2*d,e=d%2===0?b.dimensions.width:b.dimensions.height,g=new a.Joint(a.positions[h]),c=new a.Joint(a.positions[h+1]),i.save(),i.translate(l,m),i.rotate(n),k(e,g.eql(b.currentStem),0===d),i.translate(e,0),j(c.eql(b.currentStem),c.eql(f),d),q.push(i.restore());return q}}(this)(),i.closePath(),i.save(),this.options.shadow&&(i.shadowColor=this.options.shadowColor,i.shadowBlur=this.options.shadowBlur,i.shadowOffsetX=this.options.shadowOffset[0],i.shadowOffsetY=this.options.shadowOffset[1]),i.fill(),i.restore(),this.options.borderWidth&&i.stroke(),i.restore(),f?function(a){return function(){var b,c,d,e,g;return d=c=2*a.options.closeButtonRadius,"top right"===f.toString()?(g=[a.dimensions.width-a.options.closeButtonOffset[0],a.options.closeButtonOffset[1]],b=[g[0]+l,g[1]-l]):(g=[a.options.closeButtonOffset[0],a.options.closeButtonOffset[1]],b=[g[0]-l,g[1]-l]),i.translate(b[0],b[1]),e=a.options.closeButtonCrossSize/2,i.save(),i.beginPath(),i.strokeStyle=a.options.closeButtonCrossColor,i.lineWidth=a.options.closeButtonCrossLineWidth,i.lineCap="round",i.moveTo(-e,-e),i.lineTo(e,e),i.stroke(),i.beginPath(),i.moveTo(e,-e),i.lineTo(-e,e),i.stroke(),i.restore(),a.adapter.css(a.closeButtonElement,{left:""+(g[0]-e-a.options.closeButtonLinkOverscan)+"px",top:""+(g[1]-e-a.options.closeButtonLinkOverscan)+"px",width:""+(a.options.closeButtonCrossSize+2*a.options.closeButtonLinkOverscan)+"px",height:""+(a.options.closeButtonCrossSize+2*a.options.closeButtonLinkOverscan)+"px"})}}(this)():void 0}},a.prototype._getPathStemMeasures=function(a,b,c){var d,e,f,g,h,i,j;if(g=c/2,f=Math.atan(a/2/b),d=2*f,h=g/Math.sin(d),e=2*h*Math.cos(f),j=g+b-e,0>j)throw new Error("Sorry but your stemLength / stemBase ratio is strange.");return i=Math.tan(f)*j*2,{stemLength:j,stemBase:i}},a.prototype._getColor=function(a,b,c,d){var e,f,g,h,i;if(null==d&&(d=!1),"string"==typeof c)return c;for(f=d?a.createLinearGradient(0,0,b.width,0):a.createLinearGradient(0,0,0,b.height),g=h=0,i=c.length;i>h;g=++h)e=c[g],f.addColorStop(e[0],e[1]);return f},a.prototype._searchAndActivateCloseButtons=function(){var a,b,c,d;for(d=this.adapter.findAll(this.container,"."+this["class"].close),b=0,c=d.length;c>b;b++)a=d[b],this.hideTriggers.push({element:this.adapter.wrap(a),event:"click"});return this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible?this._setupObservers("-visible","visible"):void 0},a.prototype._activateFirstInput=function(){var a;return a=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")),null!=a&&"function"==typeof a.focus?a.focus():void 0},a.prototype._followMousePosition=function(){return this.options.fixed?void 0:a._observeMousePosition(this.bound.reposition)},a.prototype._stopFollowingMousePosition=function(){return this.options.fixed?void 0:a._stopObservingMousePosition(this.bound.reposition)},a.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},a.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},a.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},a.prototype._triggerElementExists=function(){var a;for(a=this.adapter.unwrap(this.triggerElement);a.parentNode;){if("BODY"===a.parentNode.tagName)return!0;a=a.parentNode}return!1},a.prototype._loadAjax=function(){return this.loading?void 0:(this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this["class"].loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(a){return function(b){return a.debug("Loading successful."),a.adapter.removeClass(a.container,a["class"].loading),a.setContent(b)}}(this),onError:function(a){return function(b){var c;return c=a.options.ajaxErrorMessage,a.debug(c,b),a.setContent(c),a.adapter.addClass(a.container,a["class"].ajaxError)}}(this),onComplete:function(a){return function(){return a.adapter.removeClass(a.container,a["class"].loading),a.loading=!1,a.loaded=!0,a._searchAndActivateCloseButtons(),a._activateFirstInput(),a.reposition()}}(this)}))},a.prototype._ensureTriggerElement=function(){return this._triggerElementExists()?void 0:(this.deactivate(),this._stopEnsureTriggerElement())},a.prototype._ensureTriggerElementInterval=1e3,a.prototype._startEnsureTriggerElement=function(){return this._ensureTriggerElementTimeoutId=setInterval(function(a){return function(){return a._ensureTriggerElement()}}(this),this._ensureTriggerElementInterval)},a.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},a}(),h=["khtml","ms","o","moz","webkit"],a.prototype.setCss3Style=function(a,b){var c,d,e,f,g;a=this.adapter.unwrap(a),g=[];for(c in b)__hasProp.call(b,c)&&(d=b[c],g.push(null!=a.style[c]?a.style[c]=d:function(){var b,g,i;for(i=[],b=0,g=h.length;g>b;b++)e=h[b],f=""+this.ucfirst(e)+this.ucfirst(c),i.push(null!=a.style[f]?a.style[f]=d:void 0);return i}.call(this)));return g},a.prototype.defer=function(a){return setTimeout(a,0)},a.prototype.setTimeout=function(a,b){return setTimeout(a,b?1e3*b:0)},a.prototype.ucfirst=function(a){return null==a?"":a.charAt(0).toUpperCase()+a.slice(1)},a.prototype.dasherize=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},f=[],e={x:0,y:0},d=function(b){var c,d,g,h;for(e=a.adapter.mousePosition(b),h=[],d=0,g=f.length;g>d;d++)c=f[d],h.push(c());return h},a.followMousePosition=function(){return a.adapter.observe(document.body,"mousemove",d)},a._observeMousePosition=function(a){return f.push(a)},a._stopObservingMousePosition=function(a){var b;return f=function(){var c,d,e;for(e=[],c=0,d=f.length;d>c;c++)b=f[c],b!==a&&e.push(b);return e}()},a.Joint=function(){function b(b){null!=b&&(b instanceof a.Joint&&(b=b.toString()),this.set(b))}return b.prototype.set=function(a){return a=a.toLowerCase(),this.setHorizontal(a),this.setVertical(a),this},b.prototype.setHorizontal=function(a){var b,c,d,e,f,g,h;for(c=["left","center","right"],d=0,f=c.length;f>d;d++)b=c[d],~a.indexOf(b)&&(this.horizontal=b.toLowerCase());for(null==this.horizontal&&(this.horizontal="center"),h=[],e=0,g=c.length;g>e;e++)b=c[e],h.push(this[b]=this.horizontal===b?b:void 0);return h},b.prototype.setVertical=function(a){var b,c,d,e,f,g,h;for(c=["top","middle","bottom"],d=0,f=c.length;f>d;d++)b=c[d],~a.indexOf(b)&&(this.vertical=b.toLowerCase());for(null==this.vertical&&(this.vertical="middle"),h=[],e=0,g=c.length;g>e;e++)b=c[e],h.push(this[b]=this.vertical===b?b:void 0);return h},b.prototype.eql=function(a){return null!=a&&this.horizontal===a.horizontal&&this.vertical===a.vertical},b.prototype.flip=function(){var b,c;return c=a.position[this.toString(!0)],b=(c+4)%8,this.set(a.positions[b]),this},b.prototype.toString=function(b){var c,d;return null==b&&(b=!1),d="middle"===this.vertical?"":this.vertical,c="center"===this.horizontal?"":this.horizontal,d&&c&&(c=b?a.prototype.ucfirst(c):" "+c),""+d+c},b}(),a.prototype._positionsEqual=function(a,b){return null!=a&&null!=b&&a.left===b.left&&a.top===b.top},a.prototype._dimensionsEqual=function(a,b){return null!=a&&null!=b&&a.width===b.width&&a.height===b.height},a.prototype.debug=function(){var b;return b=1<=arguments.length?__slice.call(arguments,0):[],a.debug&&null!=("undefined"!=typeof console&&null!==console?console.debug:void 0)?(b.unshift("#"+this.id+" |"),console.debug.apply(console,b)):void 0},a.findElements=function(){var b,c,d,e,f,g,h,i,j,k;for(b=a.adapter,j=b.findAll(document.body,"[data-ot]"),k=[],h=0,i=j.length;i>h;h++){d=j[h],g={},c=b.data(d,"ot"),(""===c||"true"===c||"yes"===c)&&(c=b.attr(d,"title"),b.attr(d,"title","")),c=c||"";for(e in a.styles.standard)f=b.data(d,"ot"+a.prototype.ucfirst(e)),null!=f&&("yes"===f||"true"===f||"on"===f?f=!0:("no"===f||"false"===f||"off"===f)&&(f=!1),g[e]=f);k.push(new a(d,c,g))}return k},a.version="2.4.6",a.debug=!1,a.lastId=0,a.lastZIndex=100,a.tips=[],a._abortShowingGroup=function(b,c){var d,e,f,g,h;for(g=a.tips,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d!==c&&d.options.group===b?d._abortShowing():void 0);return h},a._hideGroup=function(b,c){var d,e,f,g,h;for(g=a.tips,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d!==c&&d.options.group===b?d.hide():void 0);return h},a.adapters={},a.adapter=null,b=!0,a.addAdapter=function(c){return a.adapters[c.name]=c,b?(a.adapter=c,c.domReady(a.findElements),c.domReady(a.followMousePosition),b=!1):void 0},a.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],a.position={},k=a.positions,c=i=0,j=k.length;j>i;c=++i)g=k[c],a.position[g]=c;return a.styles={standard:{"extends":null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{"extends":"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{"extends":"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{"extends":"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}},a.defaultStyle="standard",a});var __hasProp={}.hasOwnProperty,__slice=[].slice;!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Adapter=b()}(this,function(){var a;return a=function(){function a(){}var b,c;return a.prototype.name="native",a.prototype.domReady=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(d=!1,j=!0,k=window,c=document,"complete"===(l=c.readyState)||"loaded"===l)return a();if(i=c.documentElement,b=c.addEventListener?"addEventListener":"attachEvent",h=c.addEventListener?"removeEventListener":"detachEvent",g=c.addEventListener?"":"on",e=function(b){return"readystatechange"!==b.type||"complete"===c.readyState?(("load"===b.type?k:c)[h](g+b.type,e,!1),d?void 0:(d=!0,a())):void 0
},f=function(){var a;try{i.doScroll("left")}catch(b){return a=b,void setTimeout(f,50)}return e("poll")},"complete"!==c.readyState){if(c.createEventObject&&i.doScroll){try{j=!k.frameElement}catch(m){}j&&f()}return c[b](g+"DOMContentLoaded",e,!1),c[b](g+"readystatechange",e,!1),k[b](g+"load",e,!1)}},a.prototype.create=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,this.wrap(b.childNodes)},a.prototype.wrap=function(a){var b;return a?"string"==typeof a?(a=this.find(document.body,a),a=a?[a]:[]):a instanceof NodeList?a=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b);return e}():a instanceof Array||(a=[a]):a=[],a},a.prototype.unwrap=function(a){return this.wrap(a)[0]},a.prototype.tagName=function(a){return this.unwrap(a).tagName},a.prototype.attr=function(a,b,c){return 3===arguments.length?this.unwrap(a).setAttribute(b,c):this.unwrap(a).getAttribute(b)},c=0,b={},a.prototype.data=function(a,d,e){var f;return f=this.attr(a,"data-id"),f||(f=++c,this.attr(a,"data-id",f),b[f]={}),3===arguments.length?b[f][d]=e:(e=b[f][d],null!=e?e:(e=this.attr(a,"data-"+Opentip.prototype.dasherize(d)),e&&(b[f][d]=e),e))},a.prototype.find=function(a,b){return this.unwrap(a).querySelector(b)},a.prototype.findAll=function(a,b){return this.unwrap(a).querySelectorAll(b)},a.prototype.update=function(a,b,c){return a=this.unwrap(a),c?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.innerHTML=b},a.prototype.append=function(a,b){var c,d;return c=this.unwrap(b),d=this.unwrap(a),d.appendChild(c)},a.prototype.remove=function(a){var b;return a=this.unwrap(a),b=a.parentNode,null!=b?b.removeChild(a):void 0},a.prototype.addClass=function(a,b){return this.unwrap(a).classList.add(b)},a.prototype.removeClass=function(a,b){return this.unwrap(a).classList.remove(b)},a.prototype.css=function(a,b){var c,d,e;a=this.unwrap(this.wrap(a)),e=[];for(c in b)__hasProp.call(b,c)&&(d=b[c],e.push(a.style[c]=d));return e},a.prototype.dimensions=function(a){var b,c;return a=this.unwrap(this.wrap(a)),b={width:a.offsetWidth,height:a.offsetHeight},b.width&&b.height||(c={position:a.style.position||"",visibility:a.style.visibility||"",display:a.style.display||""},this.css(a,{position:"absolute",visibility:"hidden",display:"block"}),b={width:a.offsetWidth,height:a.offsetHeight},this.css(a,c)),b},a.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]},a.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},a.prototype.mousePosition=function(a){var b;if(b={x:0,y:0},null==a&&(a=window.event),null!=a){try{a.pageX||a.pageY?(b.x=a.pageX,b.y=a.pageY):(a.clientX||a.clientY)&&(b.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop)}catch(c){a=c}return b}},a.prototype.offset=function(a){var b;for(a=this.unwrap(a),b={top:a.offsetTop,left:a.offsetLeft};a=a.offsetParent;)b.top+=a.offsetTop,b.left+=a.offsetLeft,a!==document.body&&(b.top-=a.scrollTop,b.left-=a.scrollLeft);return b},a.prototype.observe=function(a,b,c){return this.unwrap(a).addEventListener(b,c,!1)},a.prototype.stopObserving=function(a,b,c){return this.unwrap(a).removeEventListener(b,c,!1)},a.prototype.ajax=function(a){var b,c,d,e;if(null==a.url)throw new Error("No url provided");if(window.XMLHttpRequest)c=new XMLHttpRequest;else if(window.ActiveXObject)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){b=f;try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){b=f}}if(!c)throw new Error("Can't create XMLHttpRequest");return c.onreadystatechange=function(){if(4===c.readyState){try{200===c.status?"function"==typeof a.onSuccess&&a.onSuccess(c.responseText):"function"==typeof a.onError&&a.onError("Server responded with status "+c.status)}catch(d){b=d,"function"==typeof a.onError&&a.onError(b.message)}return"function"==typeof a.onComplete?a.onComplete():void 0}},c.open(null!=(d=null!=(e=a.method)?e.toUpperCase():void 0)?d:"GET",a.url),c.send()},a.prototype.clone=function(a){var b,c,d;c={};for(b in a)__hasProp.call(a,b)&&(d=a[b],c[b]=d);return c},a.prototype.extend=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?__slice.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)__hasProp.call(b,a)&&(e=b[a],d[a]=e)}return d},a}()}),"document"in self&&!("classList"in document.createElement("_"))&&!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b=arguments,c=0,d=b.length,e=!1;do{a=b[c]+"";var f=i(this,a);-1!==f&&(this.splice(f,1),e=!0)}while(++c<d);e&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self),!window.addEventListener&&function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(a,b){for(var c,d=0;c=g[d];++d)if(c[0]==this&&c[1]==a&&c[2]==b)return this.detachEvent("on"+a,g.splice(d,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),document.createElement("canvas").getContext||!function(){function a(){return this.context_||(this.context_=new j(this))}function b(a,b){var c=x.call(arguments,2);return function(){return a.apply(b,c.concat(x.call(arguments)))}}function c(a){var b=a.srcElement;switch(a.propertyName){case"width":b.style.width=b.attributes.width.nodeValue+"px",b.getContext().clearRect();break;case"height":b.style.height=b.attributes.height.nodeValue+"px",b.getContext().clearRect()}}function d(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function e(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(a,b){for(var c=e(),d=0;3>d;d++)for(var f=0;3>f;f++){for(var g=0,h=0;3>h;h++)g+=a[d][h]*b[h][f];c[d][f]=g}return c}function g(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function h(a){var b,c=1;if(a=String(a),"rgb"==a.substring(0,3)){var d=a.indexOf("(",3),e=a.indexOf(")",d+1),f=a.substring(d+1,e).split(",");b="#";for(var g=0;3>g;g++)b+=z[Number(f[g])];4==f.length&&"a"==a.substr(3,1)&&(c=f[3])}else b=a;return{color:b,alpha:c}}function i(a){switch(a){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function j(a){this.m_=e(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*v,this.globalAlpha=1,this.canvas=a;var b=a.ownerDocument.createElement("div");b.style.width=a.clientWidth+"px",b.style.height=a.clientHeight+"px",b.style.position="absolute",a.appendChild(b),this.element_=b,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function k(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function l(a){for(var b=0;3>b;b++)for(var c=0;2>c;c++)if(!isFinite(a[b][c])||isNaN(a[b][c]))return!1;return!0}function m(a,b,c){if(l(b)&&(a.m_=b,c)){var d=b[0][0]*b[1][1]-b[0][1]*b[1][0];a.lineScale_=u(t(d))}}function n(a){this.type_=a,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function o(){}var p=Math,q=p.round,r=p.sin,s=p.cos,t=p.abs,u=p.sqrt,v=10,w=v/2,x=Array.prototype.slice,y={init:function(a){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var c=a||document;c.createElement("canvas"),c.attachEvent("onreadystatechange",b(this.init_,this,c))}},init_:function(a){if(a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var c=a.getElementsByTagName("canvas"),d=0;d<c.length;d++)this.initElement(c[d])},initElement:function(b){if(!b.getContext){b.getContext=a,b.innerHTML="",b.attachEvent("onpropertychange",c),b.attachEvent("onresize",d);var e=b.attributes;e.width&&e.width.specified?b.style.width=e.width.nodeValue+"px":b.width=b.clientWidth,e.height&&e.height.specified?b.style.height=e.height.nodeValue+"px":b.height=b.clientHeight}return b}};y.init();for(var z=[],A=0;16>A;A++)for(var B=0;16>B;B++)z[16*A+B]=A.toString(16)+B.toString(16);var C=j.prototype;C.clearRect=function(){this.element_.innerHTML=""},C.beginPath=function(){this.currentPath_=[]},C.moveTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},C.lineTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},C.bezierCurveTo=function(a,b,c,d,e,f){var g=this.getCoords_(e,f),h=this.getCoords_(a,b),i=this.getCoords_(c,d);k(this,h,i,g)},C.quadraticCurveTo=function(a,b,c,d){var e=this.getCoords_(a,b),f=this.getCoords_(c,d),g={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},h={x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3};k(this,g,h,f)},C.arc=function(a,b,c,d,e,f){c*=v;var g=f?"at":"wa",h=a+s(d)*c-w,i=b+r(d)*c-w,j=a+s(e)*c-w,k=b+r(e)*c-w;h!=j||f||(h+=.125);var l=this.getCoords_(a,b),m=this.getCoords_(h,i),n=this.getCoords_(j,k);this.currentPath_.push({type:g,x:l.x,y:l.y,radius:c,xStart:m.x,yStart:m.y,xEnd:n.x,yEnd:n.y})},C.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},C.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},C.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},C.createLinearGradient=function(a,b,c,d){var e=new n("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},C.createRadialGradient=function(a,b,c,d,e,f){var g=new n("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},C.drawImage=function(a){var b,c,d,e,f,g,h,i,j=a.runtimeStyle.width,k=a.runtimeStyle.height;a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var l=a.width,m=a.height;if(a.runtimeStyle.width=j,a.runtimeStyle.height=k,3==arguments.length)b=arguments[1],c=arguments[2],f=g=0,h=d=l,i=e=m;else if(5==arguments.length)b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=g=0,h=l,i=m;else{if(9!=arguments.length)throw Error("Invalid number of arguments");f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],b=arguments[5],c=arguments[6],d=arguments[7],e=arguments[8]}var n=this.getCoords_(b,c),o=[],r=10,s=10;if(o.push(" <g_vml_:group",' coordsize="',v*r,",",v*s,'"',' coordorigin="0,0"',' style="width:',r,"px;height:",s,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]){var t=[];t.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",q(n.x/v),",","Dy=",q(n.y/v),"");var u=n,w=this.getCoords_(b+d,c),x=this.getCoords_(b,c+e),y=this.getCoords_(b+d,c+e);u.x=p.max(u.x,w.x,x.x,y.x),u.y=p.max(u.y,w.y,x.y,y.y),o.push("padding:0 ",q(u.x/v),"px ",q(u.y/v),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",t.join(""),", sizingmethod='clip');")}else o.push("top:",q(n.y/v),"px;left:",q(n.x/v),"px;");o.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',v*d,"px;"," height:",v*e,'px;"',' cropleft="',f/l,'"',' croptop="',g/m,'"',' cropright="',(l-f-h)/l,'"',' cropbottom="',(m-g-i)/m,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",o.join(""))},C.stroke=function(a){var b=[],c=h(a?this.fillStyle:this.strokeStyle),d=c.color,e=c.alpha*this.globalAlpha,f=10,g=10;b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',f,"px;height:",g,'px;"',' coordorigin="0 0" coordsize="',v*f," ",v*g,'"',' stroked="',!a,'"',' path="');for(var j={x:null,y:null},k={x:null,y:null},l=0;l<this.currentPath_.length;l++){var m,n=this.currentPath_[l];switch(n.type){case"moveTo":m=n,b.push(" m ",q(n.x),",",q(n.y));break;case"lineTo":b.push(" l ",q(n.x),",",q(n.y));break;case"close":b.push(" x "),n=null;break;case"bezierCurveTo":b.push(" c ",q(n.cp1x),",",q(n.cp1y),",",q(n.cp2x),",",q(n.cp2y),",",q(n.x),",",q(n.y));break;case"at":case"wa":b.push(" ",n.type," ",q(n.x-this.arcScaleX_*n.radius),",",q(n.y-this.arcScaleY_*n.radius)," ",q(n.x+this.arcScaleX_*n.radius),",",q(n.y+this.arcScaleY_*n.radius)," ",q(n.xStart),",",q(n.yStart)," ",q(n.xEnd),",",q(n.yEnd))}n&&((null==j.x||n.x<j.x)&&(j.x=n.x),(null==k.x||n.x>k.x)&&(k.x=n.x),(null==j.y||n.y<j.y)&&(j.y=n.y),(null==k.y||n.y>k.y)&&(k.y=n.y))}if(b.push(' ">'),a)if("object"==typeof this.fillStyle){var o=this.fillStyle,r=0,s={x:0,y:0},t=0,u=1;if("gradient"==o.type_){var w=o.x0_/this.arcScaleX_,x=o.y0_/this.arcScaleY_,y=o.x1_/this.arcScaleX_,z=o.y1_/this.arcScaleY_,A=this.getCoords_(w,x),B=this.getCoords_(y,z),C=B.x-A.x,D=B.y-A.y;r=180*Math.atan2(C,D)/Math.PI,0>r&&(r+=360),1e-6>r&&(r=0)}else{var A=this.getCoords_(o.x0_,o.y0_),E=k.x-j.x,F=k.y-j.y;s={x:(A.x-j.x)/E,y:(A.y-j.y)/F},E/=this.arcScaleX_*v,F/=this.arcScaleY_*v;var G=p.max(E,F);t=2*o.r0_/G,u=2*o.r1_/G-t}var H=o.colors_;H.sort(function(a,b){return a.offset-b.offset});for(var I=H.length,J=H[0].color,K=H[I-1].color,L=H[0].alpha*this.globalAlpha,M=H[I-1].alpha*this.globalAlpha,N=[],l=0;I>l;l++){var O=H[l];N.push(O.offset*u+t+" "+O.color)}b.push('<g_vml_:fill type="',o.type_,'"',' method="none" focus="100%"',' color="',J,'"',' color2="',K,'"',' colors="',N.join(","),'"',' opacity="',M,'"',' g_o_:opacity2="',L,'"',' angle="',r,'"',' focusposition="',s.x,",",s.y,'" />')}else b.push('<g_vml_:fill color="',d,'" opacity="',e,'" />');else{var P=this.lineScale_*this.lineWidth;1>P&&(e*=P),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',i(this.lineCap),'"',' weight="',P,'px"',' color="',d,'" />')}b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},C.fill=function(){this.stroke(!0)},C.closePath=function(){this.currentPath_.push({type:"close"})},C.getCoords_=function(a,b){var c=this.m_;return{x:v*(a*c[0][0]+b*c[1][0]+c[2][0])-w,y:v*(a*c[0][1]+b*c[1][1]+c[2][1])-w}},C.save=function(){var a={};g(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=f(e(),this.m_)},C.restore=function(){g(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},C.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];m(this,f(c,this.m_),!1)},C.rotate=function(a){var b=s(a),c=r(a),d=[[b,c,0],[-c,b,0],[0,0,1]];m(this,f(d,this.m_),!1)},C.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];m(this,f(c,this.m_),!0)},C.transform=function(a,b,c,d,e,g){var h=[[a,b,0],[c,d,0],[e,g,1]];m(this,f(h,this.m_),!0)},C.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];m(this,g,!0)},C.clip=function(){},C.arcTo=function(){},C.createPattern=function(){return new o},n.prototype.addColorStop=function(a,b){b=h(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})},G_vmlCanvasManager=y,CanvasRenderingContext2D=j,CanvasGradient=n,CanvasPattern=o}();